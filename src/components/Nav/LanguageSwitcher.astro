---
const locale = Astro.currentLocale;
const requestPathname = Astro.url.pathname;

let newUrl = `/${requestPathname}`;

console.log({url: Astro.url})

  // remove the locale from the url
if (locale === 'fr') {
  newUrl = Astro.url.pathname.replace(`/${locale}`, "").replace('//', '/');
  if (newUrl === '') {
    newUrl = '/'
  }

} else {
  newUrl = Astro.url.origin +  '/fr' + requestPathname;
}
---

<box>
  <a href={newUrl}>{locale === 'fr' ? "English 🏴󠁧󠁢󠁥󠁮󠁧󠁿" : "Français 🇫🇷"}</a>
</box>

<style>
  box {
    position: absolute;
    top: 1rem;
    right: 0;
  }

  a {
    color: inherit;
    border: 1px solid;
    padding: 0.5rem 1rem;
    text-decoration: none;
    outline-offset: 0.1rem;
    outline: unset;
  }
</style>
